--liquibase formatted sql

--changeset Sashacurry:create-cards-table
--comment: Создание таблицы Cards
CREATE TABLE cards (
    id_card int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    number int NOT NULL UNIQUE,
    owner int NOT NULL REFERENCES users(id_user) ON DELETE CASCADE,
    exp_month SMALLINT NOT NULL CHECK (exp_month BETWEEN 1 AND 12),
    exp_year SMALLINT NOT NULL  CHECK (exp_year >= EXTRACT(YEAR FROM current_date)),
    status varchar(20) NOT NULL,
    balance REAL
);


--rollback DROP TABLE cards;